üìò –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π Instagram –∏ Telegram

(v1 MVP)

‚∏ª

üéØ –¶–µ–ª—å

–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ TypeScript, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å Instagram –∏–ª–∏ Telegram, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ä—Å–µ—Ä. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –ø—É–±–ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏: –Ω–∏–∫–Ω–µ–π–º, –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∞–≤–∞—Ç–∞—Ä.
–°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–æ–¥—É–ª—å–Ω—ã–º, –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º –Ω–∞ –Ω–æ–≤—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∑–∞—â–∏—Ç–æ–π –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–∫—Å–∏ (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ) –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é.

‚∏ª

üìå –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ URL-–ø—Ä–∏–º–µ—Ä –ü–∞—Ä—Å–∏–Ω–≥
Instagram https://www.instagram.com/user/ Playwright (–±—Ä–∞—É–∑–µ—Ä)
Telegram https://t.me/channel HTTP + Cheerio

‚∏ª

üì• –ó–∞–ø—Ä–æ—Å

POST /parse

{
"url": "https://t.me/example_channel"
}

‚öôÔ∏è –ü–æ–∑–∂–µ (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ):

{
"url": "https://instagram.com/...",
"proxy": "http://user:pass@proxy.example.com:8000"
}

‚∏ª

üì§ –û—Ç–≤–µ—Ç

200 OK

{
"platform": "telegram",
"nickname": "example_channel",
"fullName": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞",
"bio": "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è",
"avatarUrl": "https://cdn4.telesco.pe/file/..."
}

–û—à–∏–±–∫–∏

–ö–æ–¥ –ü—Ä–∏—á–∏–Ω–∞
400 URL –Ω–µ–≤–∞–ª–∏–¥–µ–Ω –∏–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
422 –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (403/429/DOM timeout –∏ –¥—Ä.)

‚∏ª

üß† –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
   ‚Ä¢ –ù–∞ –æ—Å–Ω–æ–≤–µ hostname (instagram.com, t.me) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞.
   ‚Ä¢ –ú–∞–ø–ø–∏–Ω–≥ –≤–∏–¥–∞:

const PLATFORM_PARSERS = {
instagram: instaScrape,
telegram: tgScrape
}

    ‚Ä¢	–ï—Å–ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 400.

‚∏ª

2. –ü–∞—Ä—Å–µ—Ä—ã: –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ö–∞–∂–¥–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º:

type ScrapeResult = {
platform: string;
nickname: string;
fullName: string;
bio: string;
avatarUrl: string;
};

type Scraper = (url: string, options?: ScrapeOptions) => Promise<ScrapeResult>;

üîπ src/parsers/instagram.ts
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Playwright
‚Ä¢ –≠–º—É–ª–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞ (user-agent, –∑–∞–¥–µ—Ä–∂–∫–∏)
‚Ä¢ –û–∂–∏–¥–∞–µ—Ç DOM-—ç–ª–µ–º–µ–Ω—Ç—ã, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∫—Å–∏

üîπ src/parsers/telegram.ts
‚Ä¢ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±—Ä–∞—É–∑–µ—Ä
‚Ä¢ HTTP GET https://t.me/channel
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç cheerio –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è <meta>-—Ç–µ–≥–æ–≤:
‚Ä¢ og:title ‚Üí fullName
‚Ä¢ og:description ‚Üí bio
‚Ä¢ og:image ‚Üí avatarUrl

‚∏ª

üîå –ü—Ä–æ–∫—Å–∏
‚Ä¢ –î–ª—è Instagram –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä proxy, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ launch() Playwright:

proxy ? { server: proxy } : undefined

    ‚Ä¢	Telegram-–ø—Ä–æ–∫—Å–∏ –Ω–∞ —ç—Ç–∞–ø–µ MVP –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (HTTP GET).

‚∏ª

üßä –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis.
‚Ä¢ –ö–ª—é—á: cache:<platform>:<nickname>
‚Ä¢ TTL: 24 —á–∞—Å–∞
‚Ä¢ –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–¥–∞—ë—Ç—Å—è –∏–∑ –∫—ç—à–∞.

‚∏ª

üö¶ –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è p-queue
‚Ä¢ –ú–∞–∫—Å–∏–º—É–º 5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π Playwright
‚Ä¢ Telegram-–∑–∞–ø—Ä–æ—Å—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ (–Ω–µ –Ω–∞–≥—Ä—É–∂–∞—é—Ç –±—Ä–∞—É–∑–µ—Ä)

‚∏ª

ü™µ –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢ –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤: JSON —á–µ—Ä–µ–∑ pino
‚Ä¢ –õ–æ–≥–∏—Ä—É—é—Ç—Å—è:
‚Ä¢ platform, url, duration, source (cache / scrape), status
‚Ä¢ –æ—à–∏–±–∫–∏ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ)

‚∏ª

üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

üìÅ src
‚îú‚îÄ‚îÄ routes/
‚îÇ ‚îî‚îÄ‚îÄ parse.ts // POST /parse
‚îú‚îÄ‚îÄ parsers/
‚îÇ ‚îú‚îÄ‚îÄ instagram.ts // Playwright-—Å–∫—Ä–∞–ø–µ—Ä
‚îÇ ‚îî‚îÄ‚îÄ telegram.ts // Cheerio-—Å–∫—Ä–∞–ø–µ—Ä
‚îú‚îÄ‚îÄ utils/
‚îÇ ‚îú‚îÄ‚îÄ platform.ts // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
‚îÇ ‚îú‚îÄ‚îÄ cache.ts // Redis
‚îÇ ‚îî‚îÄ‚îÄ logger.ts // Pino –ª–æ–≥–≥–µ—Ä
‚îú‚îÄ‚îÄ index.ts // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Hono API
üìÅ docker/
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ docker-compose.yml

‚∏ª

üê≥ Docker

Dockerfile

FROM mcr.microsoft.com/playwright:v1.44.0-jammy
WORKDIR /app
COPY . .
RUN npm install
CMD ["npm", "run", "start"]

docker-compose.yml

version: '3.8'
services:
scraper:
build: .
ports: - "3000:3000"
environment: - REDIS_URL=redis://redis:6379
depends_on: - redis
redis:
image: redis:alpine
ports: - "6379:6379"

‚∏ª

üìà –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ)

–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
Instagram ~15‚Äì20 –ø—Ä–æ—Ñ–∏–ª–µ–π/–º–∏–Ω—É—Ç—É –Ω–∞ 1 —è–¥—Ä–æ
Telegram ~100‚Äì300 –ø—Ä–æ—Ñ–∏–ª–µ–π/–º–∏–Ω—É—Ç—É
–° –∫–µ—à–µ–º 500+ –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

‚∏ª

‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚Ä¢ –ú–æ–¥—É–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã
‚Ä¢ –°–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ –≤ src/parsers/\*.ts
‚Ä¢ –ü–∞—Ä—Å–µ—Ä—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏ –∑–∞–ª–æ–∂–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ
‚Ä¢ Telegram —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–∞

‚∏ª
